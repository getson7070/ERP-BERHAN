{% set segments = request.path.strip('/').split('/') if request.path != '/' else [] %}
<nav aria-label="breadcrumb" class="bg-light px-3 py-2 border-bottom">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a href="{{ url_for('main.dashboard') }}">{{ _('Home') }}</a></li>
    {% for segment in segments if segment %}
      {% set url = '/' + '/'.join(segments[:loop.index]) %}
      {% if loop.last %}
        <li class="breadcrumb-item active" aria-current="page">{{ segment.replace('_', ' ')|title }}</li>
      {% else %}
        <li class="breadcrumb-item"><a href="{{ url }}">{{ segment.replace('_', ' ')|title }}</a></li>
      {% endif %}
    {% endfor %}
  </ol>
</nav>
