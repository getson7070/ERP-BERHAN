{% extends "base.html" %}
{% block title %}BERHAN ERP Dashboard{% endblock %}
{% block body %}
<div class="container-fluid">
  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-dark sidebar collapse">
      <div class="position-sticky pt-3 text-white">
        <h4 class="text-center">BERHAN ERP</h4>
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ url_for('dashboard') }}">Dashboard</a>
          </li>
          {% if 'user_management' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">User Management</span>
            <ul class="nav flex-column ms-3">
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('user_management') }}">Manage Users</a></li>
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('employee_registration') }}">Register Employee</a></li>
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('client_registration') }}">Register Client</a></li>
            </ul>
          </li>
          {% endif %}
          {% if 'add_report' in permissions or 'marketing_report' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">Marketing</span>
            <ul class="nav flex-column ms-3">
              {% if 'marketing_report' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('promotion_report_sales') }}">Promotion Report (Sales)</a></li>
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('promotion_report_activities') }}">Promotion Report (Activities)</a></li>
              {% endif %}
              {% if 'add_report' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('add_report') }}">Add Report</a></li>
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('my_report') }}">My Report</a></li>
              {% endif %}
            </ul>
          </li>
          {% endif %}
          {% if 'add_inventory' in permissions or 'receive_inventory' in permissions or 'inventory_out' in permissions or 'inventory_report' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">Inventory</span>
            <ul class="nav flex-column ms-3">
              {% if 'add_inventory' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('add_inventory') }}">Add Inventory</a></li>
              {% endif %}
              {% if 'receive_inventory' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('receive_inventory') }}">Receive Inventory</a></li>
              {% endif %}
              {% if 'inventory_out' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('inventory_out') }}">Inventory Out</a></li>
              {% endif %}
              {% if 'inventory_report' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="#">Inventory Report</a></li>
              {% endif %}
            </ul>
          </li>
          {% endif %}
          {% if 'add_tender' in permissions or 'tenders_list' in permissions or 'tenders_report' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">Tenders</span>
            <ul class="nav flex-column ms-3">
              {% if 'add_tender' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('tenders.add_tender') }}">Add Tender</a></li>
              {% endif %}
              {% if 'tenders_list' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('tenders.tenders_list') }}">Tenders List</a></li>
              {% endif %}
              {% if 'tenders_report' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('tenders.tenders_report') }}">Tenders Report</a></li>
              {% endif %}
            </ul>
          </li>
          {% endif %}
          {% if 'view_orders' in permissions or 'put_order' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">Orders</span>
            <ul class="nav flex-column ms-3">
              {% if 'put_order' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('orders.put_order') }}">Put Order</a></li>
              {% endif %}
              {% if 'view_orders' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('orders.orders') }}">View Orders</a></li>
              {% endif %}
              {% if 'approve_order' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('approve_orders') }}">Approve/Reject Orders</a></li>
              {% endif %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('my_orders') }}">My Orders</a></li>
            </ul>
          </li>
          {% endif %}
          {% if 'maintenance_request' in permissions or 'maintenance_report' in permissions or 'maintenance_followup' in permissions %}
          <li class="nav-item">
            <span class="nav-link text-secondary">Maintenance</span>
            <ul class="nav flex-column ms-3">
              {% if 'maintenance_request' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('maintenance_request') }}">Request Maintenance</a></li>
              {% endif %}
              {% if 'maintenance_status' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('maintenance_status') }}">Maintenance Status</a></li>
              {% endif %}
              {% if 'maintenance_followup' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('maintenance_followup') }}">Maintenance Followup</a></li>
              {% endif %}
              {% if 'maintenance_report' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('maintenance_report') }}">Maintenance Report</a></li>
              {% endif %}
              {% if 'approve_maintenance' in permissions %}
              <li class="nav-item"><a class="nav-link text-white" href="{{ url_for('approve_maintenance') }}">Approve/Reject Maintenance</a></li>
              {% endif %}
            </ul>
          </li>
          {% endif %}
          <li class="nav-item">
            <a class="nav-link text-white" href="{{ url_for('auth.logout') }}">Logout</a>
          </li>
        </ul>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-md-none pt-3">
        <button class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu">
          Menu
        </button>
      </div>
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for message in messages %}
            <div class="alert alert-info">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>
  </div>
</div>
{% endblock %}
