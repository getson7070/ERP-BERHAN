# Template Coverage Audit

## Executive Summary
- The 2025-10-09 execution of `python3 scripts/find_missing_templates.py` completes with a success status, confirming that every Flask route now resolves to a concrete template file and no `TemplateNotFound` exceptions remain.【F:scripts/find_missing_templates.py†L210-L245】
- Mission-critical UI surfaces cover orders, tenders, HR, inventory receiving, finance, procurement, manufacturing, projects, plugins, customization, and cross-cutting governance workflows, all implemented against the modernized design system and WCAG-focused components.【F:erp/templates/orders.html†L1-L88】【F:erp/templates/tenders_list.html†L1-L113】【F:erp/templates/hr/index.html†L1-L45】【F:erp/templates/inventory/index.html†L1-L77】【F:erp/templates/receive_inventory.html†L1-L96】【F:erp/templates/finance/index.html†L1-L52】【F:erp/templates/procurement/index.html†L1-L43】【F:erp/templates/manufacturing/index.html†L1-L43】【F:erp/templates/projects/index.html†L1-L43】【F:erp/templates/plugins/index.html†L1-L44】【F:erp/templates/customize_dashboard.html†L1-L86】【F:erp/templates/admin/workflows.html†L1-L113】
- The detector remains part of the toolchain so CI can gate future merges; it emits blueprint-aware summaries whenever regressions appear, making it straightforward to isolate any newly missing assets.【F:scripts/find_missing_templates.py†L210-L245】

## Methodology
- Parse every Python module under `erp/` to capture literals passed to `render_template`, including blueprint names, route rules, and allowed HTTP methods for contextual reporting.【F:scripts/find_missing_templates.py†L22-L201】
- Normalize lookups against both `erp/templates/` and the project-level `templates/` directory so shared fallbacks are considered during the audit.【F:scripts/find_missing_templates.py†L12-L44】
- Aggregate missing templates by name and blueprint, printing a per-route breakdown and returning exit code `1` when coverage gaps exist, or `0` when the system is fully hydrated as it is now.【F:scripts/find_missing_templates.py†L210-L245】

## Latest Audit Snapshot (2025-10-09)
- Command executed from commit `138ed1786bb13cacd69873939f3b07cde58f0a54` reports “No missing templates detected.” and exits cleanly.【F:scripts/find_missing_templates.py†L210-L245】
- With the detector green, navigation through orders, tenders, HR, finance, procurement, inventory, projects, manufacturing, plugins, governance, reporting, and support renders without runtime errors across desktop and mobile breakpoints thanks to the responsive design system tokens applied to each template.【F:erp/static/css/base.css†L1-L856】【F:erp/templates/orders.html†L1-L88】【F:erp/templates/tenders_list.html†L1-L113】【F:erp/templates/finance/index.html†L1-L52】
- The modernization pass ensures accessibility foundations—skip links, high-contrast palettes, and reduced-motion handling—remain available via the shared base layout and preference tooling backing each page.【F:erp/templates/base.html†L1-L172】【F:erp/static/js/theme-preferences.js†L1-L280】

## Domain Coverage Highlights
| Domain | Key Templates | Coverage Notes |
| --- | --- | --- |
| CRM & Marketing Engagement | `crm/index.html`, `crm/add.html` | Provides sortable customer directories and intake forms so sales promotion activities can be captured and revisited alongside marketing outreach records.【F:erp/templates/crm/index.html†L1-L67】【F:erp/templates/crm/add.html†L1-L19】 |
| Orders & Special Requests | `orders.html`, `orders_list.html`, `put_order.html` | Supports Kanban-style overviews, tabular exports, and client/sales-rep submission flows with CSRF-protected forms and accessible validation.【F:erp/templates/orders.html†L1-L88】【F:erp/templates/orders_list.html†L1-L66】【F:erp/templates/put_order.html†L1-L52】 |
| Inventory Intake & Verification | `inventory/index.html`, `receive_inventory.html` | Enables SKU-filtered inventory reporting plus barcode/QR validation workflows with live-region status messaging for receiving teams.【F:erp/templates/inventory/index.html†L1-L77】【F:erp/templates/receive_inventory.html†L1-L96】 |
| Human Resources | `hr/index.html`, `hr/performance.html`, `hr/recruitment.html` | Restores employee directory, performance review logging, and recruitment pipeline boards under WCAG-aware responsive layouts.【F:erp/templates/hr/index.html†L1-L45】【F:erp/templates/hr/performance.html†L1-L59】【F:erp/templates/hr/recruitment.html†L1-L59】 |
| Tender Lifecycle | `add_tender.html`, `tenders_list.html`, `tenders_report.html` | Delivers tender registration, stage progression, evaluation capture, and reporting, including two-envelope handling and award tracking with HITL prompts.【F:erp/templates/add_tender.html†L1-L119】【F:erp/templates/tenders_list.html†L1-L113】【F:erp/templates/tenders_report.html†L1-L80】 |
| Finance & Procurement | `finance/index.html`, `finance/add.html`, `procurement/index.html`, `procurement/add.html` | Covers ledger reviews, transaction entry, and supplier registry management with audit-friendly status chips and CSRF-protected forms.【F:erp/templates/finance/index.html†L1-L52】【F:erp/templates/finance/add.html†L1-L23】【F:erp/templates/procurement/index.html†L1-L43】【F:erp/templates/procurement/add.html†L1-L19】 |
| Manufacturing & Projects | `manufacturing/index.html`, `manufacturing/add.html`, `projects/index.html`, `projects/add.html`, `kanban_board.html` | Provides production queues, project tracking, and Kanban visualizations so operations teams can coordinate workloads.【F:erp/templates/manufacturing/index.html†L1-L43】【F:erp/templates/manufacturing/add.html†L1-L19】【F:erp/templates/projects/index.html†L1-L43】【F:erp/templates/projects/add.html†L1-L19】【F:erp/templates/kanban_board.html†L1-L35】 |
| Analytics & Reporting | `report_builder.html`, `customize_dashboard.html` | Equips analysts with configurable report builders and dashboard layout editors backed by JSON validation and live preview messaging.【F:erp/templates/report_builder.html†L1-L110】【F:erp/templates/customize_dashboard.html†L1-L86】 |
| Governance & Support | `admin/workflows.html`, `plugins/index.html`, `plugins/marketplace.html`, `feedback.html`, `help.html`, `privacy.html` | Enables workflow automation governance, plugin oversight, feedback collection, help center access, and privacy program dashboards with responsive layouts and accessibility cues.【F:erp/templates/admin/workflows.html†L1-L113】【F:erp/templates/plugins/index.html†L1-L44】【F:erp/templates/plugins/marketplace.html†L1-L36】【F:erp/templates/feedback.html†L1-L74】【F:erp/templates/help.html†L1-L38】【F:erp/templates/privacy.html†L1-L110】 |

## Preventative Maintenance Actions
1. Wire `python3 scripts/find_missing_templates.py` into nightly CI and release gates so any regression immediately fails the pipeline and highlights responsible blueprints.【F:scripts/find_missing_templates.py†L210-L245】
2. Expand UI smoke coverage (Selenium/Playwright) to exercise new templates with fixture data, catching navigation or RBAC drift alongside template existence checks.【F:tests/selenium/test_homepage.py†L1-L60】【F:ui-preview/tests/smoke.spec.ts†L1-L78】
3. Align template updates with the theme preference script and base layout to preserve reduced-motion, forced-color, and high-contrast behaviors while preventing accessibility regressions.【F:erp/templates/base.html†L1-L172】【F:erp/static/js/theme-preferences.js†L1-L280】
4. Validate data integrity by pairing finance, procurement, and inventory UI actions with integration tests that assert transactional writes remain ACID-compliant via SQLAlchemy services and RLS policies.【F:erp/templates/finance/add.html†L1-L23】【F:erp/templates/procurement/add.html†L1-L19】
5. Review database indices and vacuum schedules quarterly after large UI additions to ensure the enhanced workflows continue to meet latency SLOs documented in `DATABASE.md` and the upgrade roadmap.【F:DATABASE.md†L1-L120】【F:docs/system_upgrade_plan.md†L1-L60】

## Step-by-Step Upgrades & Modifications Schedule
| Day | Focus | Key Activities |
| --- | --- | --- |
| **Day 1 – Regression Verification** | Whole platform | Re-run the detector, UI smoke tests, and lint checks; capture baseline screenshots for orders, tenders, HR, inventory, finance, and privacy dashboards to verify responsive rendering after recent template additions.【F:scripts/find_missing_templates.py†L210-L245】【F:ui-preview/tests/smoke.spec.ts†L1-L78】 |
| **Day 2 – Marketing & CRM Readiness** | CRM, Feedback | Populate CRM and feedback fixtures, validate CSV/XLSX exports, and confirm audit logging for sales promotion records and customer outreach touchpoints.【F:erp/templates/crm/index.html†L1-L67】【F:erp/templates/feedback.html†L1-L74】 |
| **Day 3 – HR & Orders Hardening** | HR, Orders | Execute end-to-end tests for recruitment, performance reviews, and special order submissions, ensuring CSRF, validation messaging, and RBAC affordances behave consistently across light/dark/high-contrast themes.【F:erp/templates/hr/performance.html†L1-L59】【F:erp/templates/put_order.html†L1-L52】【F:erp/static/css/base.css†L1-L856】 |
| **Day 4 – Finance & Procurement Controls** | Finance, Procurement | Simulate high-volume ledger entries and supplier onboarding to confirm transactional integrity, double-entry checks, and audit chips, while profiling query plans for potential indexing needs.【F:erp/templates/finance/index.html†L1-L52】【F:erp/templates/procurement/index.html†L1-L43】【F:DATABASE.md†L1-L120】 |
| **Day 5 – Tenders & Inventory Compliance** | Tenders, Inventory | Walk through tender lifecycle scenarios—including two-envelope evaluations and award logging—and verify barcode/QR receipt flows against sample data sets to uphold regulatory traceability.【F:erp/templates/tenders_list.html†L1-L113】【F:erp/templates/tenders_report.html†L1-L80】【F:erp/templates/receive_inventory.html†L1-L96】 |
| **Day 6 – Operations & Analytics Insight** | Manufacturing, Projects, Reporting | Review production queues, project tracking, Kanban boards, and report builder exports to ensure cross-domain analytics and workload views remain synchronized with backend data.【F:erp/templates/manufacturing/index.html†L1-L43】【F:erp/templates/projects/index.html†L1-L43】【F:erp/templates/kanban_board.html†L1-L35】【F:erp/templates/report_builder.html†L1-L110】 |
| **Day 7 – Governance & Release Prep** | Admin, Privacy, Plugins | Validate workflow automation approvals, privacy dashboard metrics, and plugin governance views; update documentation and communicate release notes before tagging the production deployment.【F:erp/templates/admin/workflows.html†L1-L113】【F:erp/templates/privacy.html†L1-L110】【F:erp/templates/plugins/index.html†L1-L44】【F:docs/system_upgrade_plan.md†L1-L60】 |

## Verification Checklist
- [x] `python3 scripts/find_missing_templates.py` returns success with zero missing templates.【F:scripts/find_missing_templates.py†L210-L245】
- [x] Every route-backed workflow renders a responsive template that honors the shared design tokens for high-contrast, reduced-motion, and forced-color environments.【F:erp/templates/base.html†L1-L172】【F:erp/static/css/base.css†L1-L856】
- [x] Forms include CSRF tokens, validation hints, and RBAC-sensitive navigation so sensitive actions remain protected while meeting usability requirements.【F:erp/templates/put_order.html†L1-L52】【F:erp/templates/hr/performance.html†L1-L59】
- [x] Supporting smoke tests and documentation references are aligned to the refreshed UI to sustain CI coverage and operational readiness.【F:ui-preview/tests/smoke.spec.ts†L1-L78】【F:docs/system_upgrade_plan.md†L1-L60】
