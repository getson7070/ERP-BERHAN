{% extends 'base.html' %}
{% block title %}Receive Inventory{% endblock %}
{% block content %}
  <header class="page-header">
    <h1 class="page-title">Receive Inventory</h1>
    <p class="page-subtitle">Scan or enter barcodes to verify items received.</p>
  </header>
  <form id="receiveForm" class="form-grid">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="form-field">
      <label for="barcode" class="form-label">Barcode</label>
      <input type="text" id="barcode" name="barcode" class="form-input" placeholder="Scan or enter barcode" required>
    </div>
    <button type="button" class="btn btn--primary" onclick="verifyBarcode()">Verify</button>
  </form>
  <div id="result" class="card" style="margin-top:1rem;"></div>
  <script>
    async function verifyBarcode() {
      const code = document.getElementById('barcode').value;
      const token = '{{ csrf_token }}';
      const res = await fetch('/inventory/receive/verify', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': token
        },
        body: JSON.stringify({barcode: code})
      });
      const data = await res.json();
      document.getElementById('result').innerText = data.valid ? 'Valid item.' : 'Invalid item.';
    }
  </script>
{% endblock %}
