{% extends "base.html" %}

{% block title %}Sign in — {{ (role or 'user')|capitalize }}{% endblock %}

{% block content %}
  <header class="page-header">
    <h1 class="page-title">Sign in</h1>
    <p class="page-subtitle">Access the {{ (role or 'user')|replace('_', ' ') }} workspace securely.</p>
  </header>
  <form method="post" class="form-grid">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <input type="hidden" name="role" value="{{ role }}">

    <div class="form-field">
      {{ form.email.label(class_="form-label") }}
      {{ form.email(
        class_="form-input",
        autocomplete="username email",
        placeholder="you@example.com",
        aria_invalid="true" if form.email.errors else "false",
        aria_describedby=form.email.id ~ '-errors' if form.email.errors else None,
      ) }}
      {% if form.email.errors %}
        <ul class="form-errors" id="{{ form.email.id }}-errors">
          {% for error in form.email.errors %}
            <li class="form-error">{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div class="form-field">
      {{ form.password.label(class_="form-label") }}
      {{ form.password(
        class_="form-input",
        autocomplete="current-password",
        placeholder="••••••••",
        aria_invalid="true" if form.password.errors else "false",
        aria_describedby=form.password.id ~ '-errors' if form.password.errors else None,
      ) }}
      {% if form.password.errors %}
        <ul class="form-errors" id="{{ form.password.id }}-errors">
          {% for error in form.password.errors %}
            <li class="form-error">{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    
            <div class="form-field">
            <label for="token" class="form-label">Authentication code</label>
            <input type="text" id="token" name="token" class="form-input" autocomplete="one-time-code" placeholder="123456" />
        </div>
<div class="form-checkbox">
      {{ form.remember(class_="form-checkbox__input") }}
      <label class="form-checkbox__label" for="{{ form.remember.id }}">Stay signed in on this device</label>
    </div>

    <button type="submit" class="btn btn--primary btn--full">Sign in</button>
  </form>
  <div class="links links--center">
    <a class="link-muted" href="{{ url_for('main.choose_login') }}">Choose another role</a>
  </div>
{% endblock %}
