{% extends "base.html" %}
{% block title %}Orders List{% endblock %}
{% block content %}
  <header class="page-header">
    <h1 class="page-title">Orders list</h1>
    <p class="page-subtitle">Search, sort, and export all orders captured in the system.</p>
    <div class="button-grid">
      <a class="btn btn--secondary" href="{{ url_for('orders.put_order') }}">Submit order</a>
      <a class="btn btn--ghost" href="{{ url_for('orders.export_orders_csv', sort=sort, dir=direction) }}">Export CSV</a>
      <a class="btn btn--ghost" href="{{ url_for('orders.export_orders_xlsx', sort=sort, dir=direction) }}">Export XLSX</a>
    </div>
  </header>
  {% if orders %}
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th scope="col"><a href="{{ url_for('orders.orders_list', sort='id', dir='asc' if sort != 'id' or direction == 'desc' else 'desc', limit=limit) }}">ID</a></th>
            <th scope="col"><a href="{{ url_for('orders.orders_list', sort='item_id', dir='asc' if sort != 'item_id' or direction == 'desc' else 'desc', limit=limit) }}">Item</a></th>
            <th scope="col"><a href="{{ url_for('orders.orders_list', sort='quantity', dir='asc' if sort != 'quantity' or direction == 'desc' else 'desc', limit=limit) }}">Quantity</a></th>
            <th scope="col"><a href="{{ url_for('orders.orders_list', sort='customer', dir='asc' if sort != 'customer' or direction == 'desc' else 'desc', limit=limit) }}">Customer</a></th>
            <th scope="col"><a href="{{ url_for('orders.orders_list', sort='status', dir='asc' if sort != 'status' or direction == 'desc' else 'desc', limit=limit) }}">Status</a></th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
            <tr>
              <td data-title="ID">{{ order.id }}</td>
              <td data-title="Item">{{ order.item_id }}</td>
              <td data-title="Quantity">{{ order.quantity }}</td>
              <td data-title="Customer">{{ order.customer }}</td>
              <td data-title="Status">{{ order.status }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <nav class="pagination" aria-label="Orders pagination">
      <span>Showing {{ orders|length }} results</span>
      <div class="pagination__actions">
        {% if prev_offset is not none %}
          <a class="btn btn--ghost" href="{{ url_for('orders.orders_list', offset=prev_offset, limit=limit, sort=sort, dir=direction) }}">Previous</a>
        {% endif %}
        {% if next_offset is not none %}
          <a class="btn btn--ghost" href="{{ url_for('orders.orders_list', offset=next_offset, limit=limit, sort=sort, dir=direction) }}">Next</a>
        {% endif %}
      </div>
    </nav>
  {% else %}
    <p class="empty-state">No orders found.</p>
  {% endif %}
{% endblock %}
{% block head %}
  {{ super() }}
  <style>
    .table-responsive { margin-top: var(--space-lg); border: 1px solid var(--border-subtle); border-radius: var(--radius-md); overflow-x: auto; }
    .table { width: 100%; border-collapse: collapse; }
    .table th, .table td { padding: var(--space-md); border-bottom: 1px solid var(--border-subtle); }
    .table th a { color: inherit; text-decoration: none; }
    .table th a:hover { text-decoration: underline; }
    .table tbody tr:last-child td { border-bottom: none; }
    .pagination { display: flex; justify-content: space-between; align-items: center; gap: var(--space-sm); margin-top: var(--space-md); flex-wrap: wrap; }
    .pagination__actions { display: flex; gap: var(--space-sm); }
    .empty-state { margin-top: var(--space-lg); padding: var(--space-lg); background: var(--layer-subtle); border-radius: var(--radius-md); text-align: center; color: var(--text-muted); }
  </style>
{% endblock %}
