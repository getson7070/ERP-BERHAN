{% extends "base.html" %}

{% block title %}Sign in Â· Berhan ERP{% endblock %}

{% block content %}
<div class="container"
     style="max-width:420px;margin:6rem auto;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;">
  <h1 style="font-weight:700;margin-bottom:1rem;">Sign in</h1>
  <p style="color:#666;margin-bottom:2rem;">
    Secure access to Berhan ERP. Use your company email and password.
  </p>

  <form method="post"
        action="{{ url_for('auth.login', next=request.args.get('next')) }}">
    <!-- CSRF protection -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label for="email" style="display:block;font-weight:500;margin-bottom:.25rem;">Email</label>
    <input id="email"
           name="email"
           type="email"
           required
           autocomplete="email"
           value="{{ request.form.get('email', '') }}"
           style="width:100%;padding:.75rem;border:1px solid #ddd;border-radius:.5rem;margin:.5rem 0 1rem;">

    <label for="password" style="display:block;font-weight:500;margin-bottom:.25rem;">Password</label>
    <input id="password"
           name="password"
           type="password"
           required
           autocomplete="current-password"
           style="width:100%;padding:.75rem;border:1px solid #ddd;border-radius:.5rem;margin:.5rem 0 1.25rem;">

    <!-- Optional MFA fields: only used if the account has MFA enabled -->
    <div style="margin-top:0.75rem;padding:0.75rem;border:1px solid #eee;border-radius:.5rem;background:#fafafa;">
      <p style="margin:0 0 .5rem;font-size:.85rem;color:#555;">
        If your account has multi-factor authentication (MFA) enabled, enter your code below.
      </p>

      <label for="totp" style="display:block;font-weight:500;margin-bottom:.25rem;font-size:.9rem;">
        Authenticator code
      </label>
      <input id="totp"
             name="totp"
             type="text"
             inputmode="numeric"
             autocomplete="one-time-code"
             placeholder="6-digit code"
             style="width:100%;padding:.6rem;border:1px solid #ddd;border-radius:.5rem;margin:.25rem 0 .75rem;">

      <label for="backup_code" style="display:block;font-weight:500;margin-bottom:.25rem;font-size:.9rem;">
        Backup code (optional)
      </label>
      <input id="backup_code"
             name="backup_code"
             type="text"
             placeholder="Use a backup code if you cannot access your authenticator"
             style="width:100%;padding:.6rem;border:1px solid #ddd;border-radius:.5rem;margin:.25rem 0 0;">
    </div>

    <button type="submit"
            style="width:100%;padding:.85rem;border:none;border-radius:.5rem;background:#2d6cdf;color:white;font-weight:600;margin-top:1.25rem;">
      Sign in
    </button>
  </form>

  <div style="margin-top:1.5rem;color:#888;font-size:.9rem;">
    <a href="/auth/forgot">Forgot password?</a>
  </div>
</div>
{% endblock %}
